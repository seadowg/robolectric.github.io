<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Robolectric</title>
    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(["_setAccount", "UA-19269905-1"]);
  _gaq.push(["_trackPageview"]);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
    <link href="../images/favicon-6cf12dec.png" rel="icon" type="image/png" />
    <link href="../stylesheets/application-5b0d8697.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="../javascripts/application-da39a3ee.js" type="text/javascript"></script>
</head>

<body>
    <div id="wrapper">
        <div id="header">
            <ul class="nav navbar-nav pull-right">
    <li>
        <a href='http://robolectric.blogspot.com'>
            <i class='glyphicon glyphicon-book'></i>
            <span>Blog</span>
        </a>
    </li>
    <li>
        <a href='http://groups.google.com/group/robolectric'>
            <i class='glyphicon glyphicon-envelope'></i>
            <span>Mailing List</span>
        </a>
    </li>
    <li>
        <a href='/javadoc/index.html?overview-summary.html'>
            <i class='glyphicon glyphicon-cog'></i>
            <span>API Docs</span>
        </a>
    </li>
</ul>
        </div>

        <div id="sidebar">
            <a href="/"><img class="logo" src="../images/robolectric-7fb6698b.png" /></a><ul class='nav nav-stacked'><li class='nav-header'>Setup</li><li class='nav-item'><a href='/installation/'>Installation</a></li><li class='nav-item'><a href='/quick-start/'>Quick Start</a></li><li class='nav-item'><a href='/eclipse-quick-start/'>Eclipse Quick Start</a></li><li class='nav-item'><a href='/download/'>Downloads</a></li></ul><ul class='nav nav-stacked'><li class='nav-header'>User Guide</li><li class='nav-item'><a href='/getting-started/'>Getting Started</a></li><li class='nav-item'><a href='/starting-components/'>Starting Other Components</a></li><li class='nav-item'><a href='/activity-lifecycle/'>Driving the Activity Lifecycle</a></li><li class='nav-item'><a href='/custom-shadows/'>Creating Custom Shadows</a></li><li class='nav-item'><a href='/apklibs/'>Working with ApkLibs</a></li><li class='nav-item'><a href='/resource-qualifiers/'>Using Qualified Resources</a></li></ul><ul class='nav nav-stacked'><li class='nav-header'>Customizing</li><li class='nav-item'><a href='/extending/'>Extending Robolectric</a></li><li class='nav-item'><a href='/custom-test-runner/'>Custom the Test Runner</a></li><li class='nav-item'><a href='/roboguice/'>Integrating with RoboGuice</a></li></ul><ul class='nav nav-stacked'><li class='nav-header'>Contributing</li><li class='nav-item'><a href='/contributor-guidelines/'>Contributor Guidelines</a></li><li class='nav-item'><a href='/release-notes/'>Release Notes</a></li><li class='nav-item'><a href='/android-jars/'>Real Android JARs</a></li><li class='nav-item'><a href='/resources/'>Other Resources</a></li></ul>
        </div>

        <div id="content">
            <h1>Quick Start for Eclipse</h1>

<p><em>Note:</em> If you&rsquo;re using <a href="http://maven.apache.org/">Maven</a> as your build tool you can include Robolectric tests in
the same project as your application code without any additional configuration using the <a href="http://rgladwell.github.io/m2e-android/">Android for Maven Eclipse</a> plugin.</p>

<h2>Download JARs</h2>

<p>You&rsquo;ll need at least the &ldquo;robolectric-x.x.x-jar-with-dependencies&rdquo; jar, which can be obtained <a href="/download/">here</a>.
You may also want the source jar matching your Robolectric version from the same location, in case you run in to any
bugs. Also recommended, but not required, is the <a href="https://code.google.com/p/hamcrest/downloads/list">latest hamcrest-all jar</a>.</p>

<h2>Project Creation</h2>

<p>Create a project</p>

<ul>
<li>File &rarr; New &rarr; Project&hellip; &rarr; Android &rarr; Android Project</li>
<li>Click &ldquo;Next&rdquo;</li>
</ul>

<p>New Android Project dialog</p>

<ul>
<li>Project/Application Name: MyProject</li>
<li>Package Name: com.example.myproject</li>
<li>Target/Compile With: API 18</li>
</ul>

<p>Make sure to note the package name, as you&rsquo;ll need it later. Target SDK can&rsquo;t currently be set to anything higher
than API 18, as Robolectric doesn&rsquo;t yet support API 19.</p>

<p>Add a &lsquo;test&rsquo; directory to your project</p>

<ul>
<li>Right click on &lsquo;MyProject&rsquo; in the package explorer &rarr; New&hellip; &rarr; Folder (<strong>not</strong> Source Folder)</li>
<li>Folder name: test (do not make this a source folder for this project - hang tight)</li>
<li>Click &ldquo;Finish&rdquo;</li>
</ul>

<p>Add a &lsquo;test&rsquo; subdirectory under libs</p>

<ul>
<li>Right click on &lsquo;libs&rsquo; &rarr; New&hellip; &rarr; Folder (Again, <strong>not</strong> a source folder)</li>
<li>Folder name &lsquo;test&rsquo; </li>
<li>Click &ldquo;Finish&rdquo;</li>
</ul>

<p>Finally, drag and drop/otherwise copy your test-related jar files (robolectric/sources/hamcrest) into the libs/test directory.</p>

<h2>Create a <em>JAVA</em> project for your tests</h2>

<p>Create and configure test Java project (<strong>not</strong> an Android Application Project)</p>

<ul>
<li>File &rarr; New &rarr; Java Project&hellip;</li>
<li>Project Name: MyProjectTests</li>
<li>Under &ldquo;Project Layout&rdquo;, select &ldquo;Use project folder as root for sources and class files&rdquo;</li>
<li>On Source tab Under &ldquo;Details&rdquo;, click &ldquo;Link additional source&rdquo;</li>
<li>Browse to and select &ldquo;&hellip;/MyProject/test&rdquo;</li>
<li>Click &ldquo;Finish&rdquo; on the &ldquo;Link additional sources&rdquo; dialog (keep the new Java project dialog open)</li>
</ul>

<p>Add dependency on the Android project</p>

<ul>
<li>Select &ldquo;Projects&rdquo; tab at the top of the New Java Project dialog</li>
<li>Click &ldquo;Add&hellip;&rdquo;</li>
<li>Check &ldquo;MyProject&rdquo;</li>
<li>Click &ldquo;OK&rdquo;</li>
</ul>

<p>Add required libraries</p>

<ul>
<li>Select &ldquo;Libraries&rdquo; tab at the top of the New Java Project dialog</li>
<li>Robolectric jars

<ul>
<li>Click &ldquo;Add JARS&rdquo;</li>
<li>Select all jars from within MyProject/libs/test, then click &ldquo;OK&rdquo;</li>
</ul></li>
<li>Android jars

<ul>
<li>Click &ldquo;Add External Jars&rdquo;</li>
<li>Navigate to your SDK install directory, then select &ldquo;platforms/android-xx/android.jar&rdquo;, choosing the API version to match the one you chose for Target when creating the Android project.</li>
<li>Click &ldquo;Open&rdquo; to add android.jar</li>
</ul></li>
<li>JUnit

<ul>
<li>Click &ldquo;Add Library&rdquo;</li>
<li>Select JUnit, then click &ldquo;Next&rdquo;</li>
<li>Change the JUnit version to 4 (Robolectric requires JUnit 4), then click &ldquo;Finish&rdquo;</li>
</ul></li>
</ul>

<p>Set classpath order</p>

<ul>
<li>Select &ldquo;Order and Export&rdquo; tab at the top of the New Java Project dialog</li>
<li>Select android.jar, and move it down so that it appears below the robolectric jars</li>
</ul>

<p>Click &ldquo;Finish&rdquo;, closing the new Java project dialog</p>

<p>Most of these settings can be changed later by right-clicking your test project, selecting &ldquo;Build path&rdquo; &rarr; &ldquo;Configure Build Path&rdquo;</p>

<h2>Create a test Run Configuration</h2>

<p>Your tests will <em>not</em> run without this step; Robolectric will not be able to locate your project resources.</p>

<ul>
<li>Click &ldquo;Run&rdquo; &rarr; &ldquo;Run Configurations&hellip;&rdquo;</li>
<li>Double click &ldquo;<em>JUnit</em>&rdquo; (<strong>not</strong> &ldquo;Android JUnit Test&rdquo;)</li>
<li>Name: MyProjectTests</li>
<li>Select the &ldquo;Run all tests in the selected project, package or source folder:&rdquo; radio button</li>
<li>Click the &ldquo;Search&rdquo; button</li>
<li>Select &ldquo;MyProjectTest&rdquo;</li>
<li>Test runner: JUnit 4</li>
<li>Click on the link &ldquo;Multiple launchers available Select one&hellip;&rdquo; at the bottom of the dialog</li>
<li>Check the &ldquo;Use configuration specific settings&rdquo; box</li>
<li>Select &ldquo;Eclipse JUnit Launcher&rdquo;</li>
<li>Click &ldquo;OK&rdquo;</li>
<li>Click the &ldquo;Arguments&rdquo; tab</li>
<li>Under &ldquo;Working directory:&rdquo; select the &ldquo;Other:&rdquo; radio button</li>
<li>Click &ldquo;Workspace&hellip;&rdquo;</li>
<li>Select &ldquo;MyProject&rdquo; (<strong>not</strong> &ldquo;MyProjectTest&rdquo;, The value inside of &lsquo;Other&rsquo; edit box should be &lsquo;${workspace_loc:MyProject}&rsquo;), then click &ldquo;OK&rdquo;</li>
<li>Click &ldquo;Apply&rdquo; then &ldquo;Close&rdquo;</li>
</ul>

<h2>Verify your setup</h2>

<ul>
<li>Right click the &ldquo;test&rdquo; source folder under &ldquo;MyProjectTest&rdquo;</li>
<li>Select &ldquo;New&rdquo;&rarr;&ldquo;Class&rdquo;</li>
<li>Package: &ldquo;com.example&rdquo;</li>
<li>Name: &ldquo;MainActivityTest&rdquo; (the name of the default activity created in your Android project suffixed with &ldquo;test&rdquo;</li>
<li>Click &ldquo;Finish&rdquo;</li>
<li>Add the following source:</li>
</ul>
<pre class="highlight java"><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">myproject</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.robolectric.Robolectric</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.robolectric.RobolectricTestRunner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.Before</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.runner.RunWith</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">hamcrest</span><span class="o">.</span><span class="na">CoreMatchers</span><span class="o">.</span><span class="na">equalTo</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">assertThat</span><span class="o">;</span>

<span class="nd">@RunWith</span><span class="o">(</span><span class="n">RobolectricTestRunner</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainActivityTest</span> <span class="o">{</span>

    <span class="n">MainActivity</span> <span class="n">activity</span><span class="o">;</span>

    <span class="nd">@Before</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">setup</span><span class="o">()</span>
    <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">activity</span> <span class="o">=</span> <span class="n">Robolectric</span><span class="o">.</span><span class="na">buildActivity</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">create</span><span class="o">().</span><span class="na">get</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">shouldHaveHappySmiles</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> 
    <span class="o">{</span>
        <span class="n">String</span> <span class="n">hello</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">activity</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">hello_world</span><span class="o">);</span>
        <span class="n">assertThat</span><span class="o">(</span><span class="n">hello</span><span class="o">,</span> <span class="n">equalTo</span><span class="o">(</span><span class="s">"Hello world!"</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre>
<p>To run the tests</p>

<ul>
<li>&ldquo;Run&rdquo; &rarr; &ldquo;Run Configurations&hellip;&rdquo;</li>
<li>Select &ldquo;JUnit&rdquo; &rarr; &ldquo;MyProjectTests&rdquo;</li>
<li>Click &ldquo;Run&rdquo;</li>
</ul>

<p>The tests may take quite a while to start running after the first launch. Robolectric downloads a real Android jar on the first run, placing it in your local maven repo. Future test runs are considerably faster.</p>

<h2><em>If you get a RuntimeException saying: &ldquo;no such layout layout/main&rdquo;</em></h2>

<p>It means that you have tried to run a test for which you do not have a Run Configuration set up. To remedy this:</p>

<ul>
<li>Right click on the test</li>
<li>&ldquo;Run As&rdquo; &rarr; &ldquo;Run Configurations&hellip;&rdquo;</li>
<li>Double click &ldquo;JUnit&rdquo; (this will magically make the test you&rsquo;re running appear under JUnit)</li>
<li>Select &ldquo;MyActivityTest&rdquo; (or the name of whichever test you are currently trying to run)</li>
<li>TestRunner: JUnit 4</li>
<li>Click on the link &ldquo;Multiple launchers available Select one&hellip;&rdquo; (or it also may appear as &ldquo;Using XXX Launcher - Select
other&hellip;&rdquo;) at the bottom of the dialog</li>
<li>Check the &ldquo;Use configuration specific settings&rdquo; box</li>
<li>Select &ldquo;Eclipse JUnit Launcher&rdquo;</li>
<li>Click &ldquo;OK&rdquo;</li>
<li>Click the &ldquo;Arguments&rdquo; tab</li>
<li>Under &ldquo;Working directory:&rdquo; select the &ldquo;Other:&rdquo; radio button</li>
<li>Click &ldquo;Workspace&hellip;&rdquo;</li>
<li>Select &ldquo;MyProject&rdquo; (<em>not</em> &ldquo;MyProjectTest&rdquo;)</li>
<li>Click &ldquo;OK&rdquo;</li>
<li>Click &ldquo;Close&rdquo;</li>
</ul>

        </div>
    </div>

    <div id="footer">
        
    </div>
</body>
</html>